@import "../variables.styl";
@import '../../mixin.styl'

$-btn-border-types := default dashed
$-btn-types := primary success warning danger
$-btn-size-types := large small mini
$-btn-text-types := none text

.kd-btn
  position relative
  padding $-btn-default-padding
  font-size $-btn-default-font-size
  cursor pointer
  border-radius $-btn-border-radius
  line-height 1
  border 1px solid $-btn-default-border-color
  color $-black-color

//  border的类型
for border in $-btn-border-types
    .kd-btn-{border}
        background-color $-btn-default-bg
        color $-btn-default-color
        border-style lookup('$-btn-'+ border +'-border-style')
        &:hover
        &:focus
            color $-btn-primary-color
            border-color $-btn-primary-color
        &:active
            border-color $-btn-primary-color
            background-color palette($-btn-primary-color, -3)
            color palette($-btn-primary-color,1)

    .kd-btn-{border}.kd-btn-hollow
        background-color transparent
        border 1px solid $-btn-border-color
        color $-btn-default-color
        &:hover
        &:focus
            border 1px solid lookup('$-btn-'+ type +'-color')
            color palette($-btn-primary-color, 0)
        &:active
            color palette($-btn-primary-color, 1)

    .kd-btn-{border}.kd-btn-disabled
        background-color $-btn-disabled-bg-color
        border-color $-btn-border-color
        color $-btn-disabled-color
    
//4种状态
for type in $-btn-types
    .kd-btn-{type}
        background-color lookup('$-btn-'+ type +'-color')
        border 1px solid lookup('$-btn-'+ type +'-color')
        color $-white-color
        &:hover
        &:focus
            background-color palette(lookup('$-btn-'+ type +'-color'),-1)
            border-color palette(lookup('$-btn-'+ type +'-color'),-1)
        &:active
            background-color palette(lookup('$-btn-'+ type +'-color'),1)
            border-color palette(lookup('$-btn-'+ type +'-color'),1)
    //空心
    .kd-btn-{type}.kd-btn-hollow
        background-color transparent
        border 1px solid lookup('$-btn-'+ type +'-color')
        color lookup('$-btn-'+ type +'-color')
        &:hover
        &:focus
            background-color palette(lookup('$-btn-'+ type +'-color'), -4)
        &:active
            background-color lookup('$-btn-'+ type +'-color')
            color $-white-color
    .kd-btn-{type}.kd-btn-disabled
        background-color $-btn-disabled-bg-color
        border-color $-btn-border-color
        color $-btn-disabled-color

//  text types
for textItem in $-btn-text-types
    .kd-btn-{textItem}
        padding 0
        background-color transparent
        border-color transparent
        color lookup('$-btn-'+ textItem +'-color')
        &:hover
        &:focus
            color palette(lookup('$-btn-'+ textItem +'-hover-color'), -1)
        &:active
            color palette(lookup('$-btn-'+ textItem +'-hover-color'), 1)
    .kd-btn-{textItem}.kd-btn-disabled
        color $-disabled-color
//  加载
.kd-btn-loading
    pointer-events none
    user-select none
    &:before
        content ""
        position absolute
        top -1px
        left -1px
        bottom -1px
        right -1px
        background-color rgba(255,255,255,0.3)
.kd-btn-loading-icon
    // i
    display inline-block
    transform-origin center
    animation kd-btn-loading-dash 1s linear infinite
//size
for s in $-btn-size-types
    .kd-btn-{s}
        padding lookup('$-btn-'+ s +'-padding')
        font-size lookup('$-btn-'+ s +'-font-size')
        [class*=kd-icon]
            font-size lookup('$-btn-'+ s +'-font-size')
    .kd-btn-circle.kd-btn-{s}
        padding lookup('$-btn-'+ s +'-circle-padding')
    
    
.kd-btn-disabled
  color $-disabled-color
  cursor not-allowed

.kd-icon-left
    margin-right $-btn-icon-text-gutter
.kd-icon-right
    margin-left $-btn-icon-text-gutter

//shape
.kd-btn-circle
    border-radius $-btn-shape-circle
    padding: $-btn-default-circle-padding
.kd-btn-round
    border-radius $-btn-shape-round

.kd-btn-split
    padding $-btn-split-padding

@keyframes kd-btn-loading-dash {
    100%{
        transform-origin center
        transform: rotate(360deg)
    }
}